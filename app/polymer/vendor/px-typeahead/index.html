<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>px-typeahead Demo</title>
  <link rel="stylesheet" type="text/css" href="css/px-typeahead-demo.css"/>
  <!-- Import custom element. Note: see comment about relative paths to dependencies in the *.html file referenced below -->
  <script src="../webcomponentsjs/webcomponents-lite.js"></script>

  <link rel="import" href="../px-theme/px-theme-styles.html">
  <style include="px-theme-styles" is="custom-style"></style>

  <link rel="import" href="../px-api-viewer/px-api-viewer.html" />
  <link rel="import" href="../px-tabs/px-tab-set.html" />
  <link rel="import" href="../iron-ajax/iron-ajax.html" />
  <link rel="import" href="../px-polymer-font-awesome/polymer-font-awesome.html" />
  <link rel="import" href="px-typeahead.html"/>
  <link rel="icon" href="favicon.ico" type="image/x-icon"/>
  <link rel="import" href="../px-demo-snippet/px-demo-snippet.html">
  <!-- Requires Webcomponents.js polyfill is provided by the page for browsers that don't support html imports -->

  </head>

<body>

  <!-- Wrap elements with auto-binding template to -->
  <!-- allow use of Polymer bindings in main document -->
  <template id="just-for-demo" is="dom-bind" >
    <!-- description -->
    <div class="hero u-p++ text--shadow">
      <a class="actionable flex flex--right flex--middle" href="https://github.com/PredixDev/px-typeahead" target="_blank"><iron-icon class="menu__open" icon="fa:fa-github"></iron-icon>View on Github</a>
  		<h1 class="delta">px-typeahead</h1>
      <div class="description-text">
    		<p>
          px-typeahead is a Predix UI component that show possible completion options for the search term entered.
    		</p>
      </div>
  		<div class="flex">
  			<img class="u-mr--" src="https://img.shields.io/travis/PredixDev/px-typeahead.svg?style=flat-square" alt="Travis"/>
  			<img class="u-mr--" src="https://img.shields.io/bower/v/px-typeahead.svg?style=flat-square" alt="Bower"/>
  			<img class="u-mr--" src="https://img.shields.io/github/issues-raw/PredixDev/px-typeahead.svg?style=flat-square" alt="Issues"/>
  		</div>
  	</div>

    <!-- mega demo -->
    <div style="position: relative;" class="u-pb++ flex flex--col" id="defaultTab">
      <div class="tabContainer u-pt++ u-pl++">
        <px-tab-set selected="{{selected}}" bare no-bottom-border>
          <template is="dom-repeat" items="{{optionsArray}}">
            <px-tab>Option {{indexPlusOne(index)}}</px-tab>
          </template>
        </px-tab-set>
      </div>
      <px-tab-pages selected="{{selected}}">
        <template is="dom-repeat" items="{{optionsArray}}">
          <section class="tab-page">
            <div class="mega-demo flex u-ph++ u-pb++">
              <!-- Properties -->
              <div class="properties u-ph+ u-pb+ u-mt+">
              <p class="epsilon">Properties</p>

              <div class="u-mb-">Max Suggestions: <input class="text-input" type="text" placeholder="{{item.maxSuggestions}}" value="{{item.maxSuggestions::input}}" /></div>
              <div class="u-mb-">Placeholder: <input class="text-input" type="text" placeholder="{{item.placeholder}}" value="{{item.placeholder::input}}" /></div>
            </div>

            <div class="demoContainer u-mt+">
              <!-- demo -->
              <div class="flex flex--col">
                <div class="demo u-p+">

                  <px-typeahead
                    max-suggestions="{{item.maxSuggestions}}"
                    local-candidates="{{item.localCandidates}}"
                    prefetch-url="{{item.prefetchUrl}}"
                    placeholder="[[item.placeholder]]">
                    </px-typeahead>
                  </div>
                </div>
                <div>
                  <px-demo-snippet
                    element-properties=[[item]]
                    element-name="px-typeahead">
                  </px-demo-snippet>
                </div>
              </div>
            </div>
          </div>
          <div class="apiContainer">
            <div class="flex flex--col api u-mt++" >
              <div>
                <px-api-viewer source="px-typeahead"></px-api-viewer>
              </div>
            </div>
          </div>
        </section>
      </template>
    </px-tab-pages>
  </div>
  <footer class="footer flex flex--center">
    <div class="footer__container u-pv++">
      <div>
        <a href="https://ge.com/digital" >
          <img src="monogram-wdmk.png" alt="GE Monogram" class="footer__img">
        </a>
      </div>
      <div class="footer__list">
        <ul class="list-inline list-inline--delimited">
          <li>
            <a href="http://predix.io/legal" class="footer__list--lnk">Legal</a>
          </li>
          <li>
            <a href="mailto:info@predix.io" class="footer__list--lnk">Contact Us</a>
          </li>
          <li>Copyright &copy; 2016 General Electric Company. All rights reserved.</li>
        </ul>
      </div>
    </div>
  </footer>
</template>
<script>



window.addEventListener('WebComponentsReady', function() {
  var template = document.querySelector('template[is=dom-bind]'),
      year = new Date(),
      optionsArray = [
        {
          maxSuggestions: 10,
          placeholder: 'Please type in your Query:',
          localCandidates: [
             "Alabama",
             "Alaska",
             "American Samoa",
             "Arizona",
             "Arkansas",
             "California",
             "Colorado",
             "Connecticut",
             "Delaware",
             "District Of Columbia",
             "Federated States Of Micronesia",
             "Florida",
             "Georgia",
             "Guam",
             "Hawaii",
             "Idaho",
             "Illinois",
             "Indiana",
             "Iowa",
             "Kansas",
             "Kentucky",
             "Louisiana",
             "Maine",
             "Marshall Islands",
             "Maryland",
             "Massachusetts",
             "Michigan",
             "Minnesota",
             "Mississippi",
             "Missouri",
             "Montana",
             "Nebraska",
             "Nevada",
             "New Hampshire",
             "New Jersey",
             "New Mexico",
             "New York",
             "North Carolina",
             "North Dakota",
             "Northern Mariana Islands",
             "Ohio",
             "Oklahoma",
             "Oregon",
             "Palau",
             "Pennsylvania",
             "Puerto Rico",
             "Rhode Island",
             "South Carolina",
             "South Dakota",
             "Tennessee",
             "Texas",
             "Utah",
             "Vermont",
             "Virgin Islands",
             "Virginia",
             "Washington",
             "West Virginia",
             "Wisconsin",
             "Wyoming"
            ]
        },
        {
          maxSuggestions: 5,
          placeholder: "Please type in your Query - the list is being brought in from a json file",
          prefetchUrl: "https://predixdev.github.io/px-typeahead/px-typeahead/countries.json"
        }
      ],
      indexPlusOne = function(num) {
        return num + 1;
      },
      _isSecondTab = function(index) {
        return index === 1;
      },
      browserContextArray = [{
        "data": [
            {
                "identifier": "001-1",
                "name": "Lots of Children",
                "isOpenable" : true,
                "hasChildren": true
            },
            {
              "identifier": "001-2",
              "name": "Deep nested",
              "isOpenable" : true,
              "children": [
                    {
                        "identifier": "001-2a",
                        "name": "Nested Child 1",
                        "isOpenable" : true,
                        "children": [
                          {
                            "identifier": "001-2aa",
                            "name": "Nested Grandchild 1",
                            "isOpenable" : true,
                            "children" : [{
                              "identifier": "001-2aba",
                              "name": "Nested Great Grandchild 1",
                              "isOpenable" : true
                            },
                            {
                              "identifier": "001-2abb",
                              "name": "Nested Great Grandchild 2",
                              "isOpenable" : true
                            },
                            {
                              "identifier": "001-2abc",
                              "name": "Nested Great Grandchild 3",
                              "isOpenable" : true,
                              "selectedAsset": true
                            }],
                            "meta": { "parentId": "001-2ab" }
                          },
                          {
                            "identifier": "001-2ab",
                            "name": "Nested Grandchild 2",
                            "isOpenable" : true
                          },
                          {
                            "identifier": "001-2ac",
                            "name": "Nested Grandchild 3",
                            "isOpenable" : true
                          }
                        ],
                        "meta": { "parentId": "001-2a" }
                    },
                    {
                      "identifier": "001-2b",
                      "name": "Nested Child 2",
                      "isOpenable" : true
                    },
                    {
                      "identifier": "001-2c",
                      "name": "Nested Child 3",
                      "isOpenable" : true
                    }
                ],
                "meta": { "parentId": "001-2" }
            },
            {
            "identifier": "001-3",
            "name": "Nothing Below Me",
            "isOpenable" : true
            },
            {
            "identifier": "001-4",
            "name": "Nothing Below, Not openable"
           }
        ],
        "meta": { "parentId": null }
        }, {
          "data": [
            {
              "name": "Lots of children",
              "identifier": "001-1",
              "isOpenable": true,
              "hasChildren": true
            }, {
              "name": "Deep nested",
              "identifier": "001-2",
              "isOpenable": true,
              "hasChildren": true
            }, {
              "name": "Nothing Below Me",
              "identifier": "001-3",
              "isOpenable": true
            }, {
              "name": "Nothing Below, Not openable",
              "identifier": "001-4",
              "isOpenable": false
            }
          ],
          "meta": {
            "parentId": null
          }
        }
      ],
      pxTabs = document.querySelector('px-tab-pages'),
      lightDomLoaded = function() {
        var colBrowser = Polymer.dom(pxTabs[0]).querySelectorAll('px-typeahead');

            },
      content = Polymer.dom(pxTabs.root).querySelector('content'),
      //this calls the lightDomLoaded method when the content is loaded
      _observer = Polymer.dom(content).observeNodes(lightDomLoaded);


  template.selected = "0";
  template.optionsArray = optionsArray;
  template.indexPlusOne = indexPlusOne;

});
</script>

</body>
</html>
